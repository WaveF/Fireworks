//--not for batch--// Copyright (c) 1999 Macromedia. All rights reserved.// Get the Current Layervar currentLayer = fw.getDocumentDOM().currentLayerNum;// Lock all of the Layersvar numberLayers = fw.getDocumentDOM().layers.length;var parentlayers = new Array(40);// Do not lock the parent layer if anyvar parentLayerNum = fw.getDocumentDOM().getParentLayerNum(currentLayer);var i = 0;while(parentLayerNum > -1){	// storing all the parent layer numbers		parentlayers[i] = parentLayerNum;		i++;		parentLayerNum = fw.getDocumentDOM().getParentLayerNum(parentLayerNum);}var j = 0;var flag = 0;for (count = 0 ; count < numberLayers ; count++){	if(i > 0)	{	// find if the this layer is one of parent layer then we dont lock it.	// this process may be lengthy but it allows the undo to be correctly done		while(j < i)		{			if( count == parentlayers[j])			{				flag = 1;				break;			}			j++;		}			}	if(flag == 0)		fw.getDocumentDOM().setLayerLocked(count, 0, true, false);	flag = 0;	j = 0;}// Unlock the Current Layerfw.getDocumentDOM().setLayerLocked(currentLayer, 0, false, false);